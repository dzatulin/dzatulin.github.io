---
title: "Cloudflare (I am under attack)"
date: 2022-06-04
categories:
  - Blog
tags:
  - Cloudflare
---
 Немного информации о том как устроен режим работы  **“I am Under Attack Mode”** - это самый простой и быстрый способ защитить свой сайт от DDoS-атак. Этот режим существует достаточно давно и устойчив к большинству атак уровня L7. 
 Несмотря на высокую популярность, специалисты часто не понимают как устроена эта защита.
  
 Особенность обнаружения ботов:
  - не может обрабатывать код сайта;
  - игнорирует файлы cookie;

 На основе поведения ботов была реализована идея **"challenging visitors"**, что бы выявить реальных пользователей и заблокировать вредоносных ботов. Прежде чем клиент сможет получить доступ к вашему сайту, его браузер должен решить задачу, которая выполняет часть кода (обычно написанного на JavaScript). Когда решается задача **Cloudflare CAPTCHA или Javascript** в браузере клиента устанавливается файл cookie *cf_clearance*. **cf_clearance** определяет время доступности сайта посетителю, который успешно выполнил предыдущую проверку Captcha или JavaScript. Срок  действия файла cookie cf_clearance  по умолчанию составляет 30 минут. Cloudflare рекомендует установить значение от 15 до 45 минут.
 Важно понимать, что не во всех атаках может помочь режим “I am Under Attack Mode”. Более сложные могут обходить этот режим защиты.

